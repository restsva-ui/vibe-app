<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VIBE AI</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #0d1012; color: white; font-family: sans-serif; display: flex; justify-content: center; padding: 15px; margin: 0; }
        .app { width: 100%; max-width: 380px; background: #161a1d; border-radius: 30px; padding: 24px; border: 1px solid #2d3139; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .logo { text-align: center; font-weight: 800; color: #00d2ff; font-size: 24px; margin-bottom: 25px; letter-spacing: 2px; }
        .chars { display: flex; justify-content: space-around; margin-bottom: 25px; }
        .card { width: 80px; text-align: center; cursor: pointer; opacity: 0.4; transition: 0.3s; font-size: 12px; }
        .card.active { opacity: 1; transform: scale(1.1); }
        .circle { width: 60px; height: 60px; border-radius: 50%; background: #23282e; margin: 0 auto 8px; border: 2px solid #2d3139; display: flex; align-items: center; justify-content: center; font-weight: 900; font-size: 22px; }
        .active#Diplomat .circle { border-color: #00d2ff; box-shadow: 0 0 15px #00d2ff; }
        .active#Shark .circle { border-color: #ff4b2b; box-shadow: 0 0 15px #ff4b2b; }
        .active#Aristocrat .circle { border-color: #ffd700; box-shadow: 0 0 15px #ffd700; }
        textarea { width: 100%; background: #000; border: 1px solid #1e2227; color: white; border-radius: 15px; padding: 15px; height: 120px; outline: none; box-sizing: border-box; font-size: 16px; margin-bottom: 15px; }
        #res { padding: 15px; border-radius: 12px; background: #0b0d0e; color: #4ade80; display: none; border: 1px solid #2d3139; line-height: 1.4; margin-bottom: 15px; }
        .btn { width: 100%; padding: 18px; border-radius: 15px; border: none; font-weight: bold; font-size: 16px; cursor: pointer; background: linear-gradient(135deg, #00d2ff, #0080ff); color: white; }
    </style>
</head>
<body>
<div class="app">
    <div class="logo">VIBE</div>
    <div class="chars">
        <div class="card active" id="Diplomat" onclick="sel('Diplomat')"><div class="circle" style="color:#00d2ff">D</div><span>Diplomat</span></div>
        <div class="card" id="Shark" onclick="sel('Shark')"><div class="circle" style="color:#ff4b2b">S</div><span>Shark</span></div>
        <div class="card" id="Aristocrat" onclick="sel('Aristocrat')"><div class="circle" style="color:#ffd700">A</div><span>Aristocrat</span></div>
    </div>
    <textarea id="inp" placeholder="Вставте текст..."></textarea>
    <div id="res"></div>
    <button id="b-gen" class="btn" onclick="ask()">✨ ГЕНЕРУВАТИ</button>
</div>
<script>
    let mode = 'Diplomat';
    const tg = window.Telegram.WebApp;
    tg.expand();

    function sel(m) {
        mode = m;
        document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
        document.getElementById(m).classList.add('active');
    }

    async function ask() {
        const text = document.getElementById('inp').value;
        const resDiv = document.getElementById('res');
        const btn = document.getElementById('b-gen');
        if(!text.trim()) return;
        
        btn.disabled = true;
        resDiv.style.display = "block";
        resDiv.innerHTML = "<i>VIBE аналізує...</i>";

        try {
            const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': 'Bearer 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'
                },
                body: JSON.stringify({
                    model: "llama-3.3-70b-versatile",
                    messages: [
                        {role: "system", content: "Ти " + mode + ". Відповідай мовою запиту коротко і влучно."},
                        {role: "user", content: text}
                    ]
                })
            });
            const data = await response.json();
            resDiv.innerHTML = "<b>" + mode + ":</b><br>" + data.choices[0].message.content;
        } catch (e) {
            resDiv.innerHTML = "Помилка зв'язку.";
        } finally {
            btn.disabled = false;
        }
    }
</script>
</body>
</html>
